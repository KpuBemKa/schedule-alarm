<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alarm Schedule</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="calendar.css" />
</head>

<body>
    <div class="top">
        <div class="left">
            <span id="timeDisplay" style="font-weight: bold;">Loading...</span>
        </div>
    </div>

    <div>
        <div class="tab-group-main tabs">
            <button class="tab active" onclick="showTab('tab-group-main', 'tab-schedule')">Schedule</button>
            <button class="tab" onclick="showTab('tab-group-main', 'tab-settings')">Settings</button>
        </div>

        <div id="tab-schedule" class="tab-group-main tab-content active">
            <form id="scheduleForm">
                <div class="d-row d-justify-space-between">
                    <div>
                        <label for="schedule_loop_type" class="d-schedule-label">Schedule loops: </label>
                        <select id="schedule-loop-type" name="schedule_loop_type" class="form-select"
                            onchange="scheduleTypeSelectChanged()" required>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="yearly">Yearly</option>
                            <option value="custom">Custom range</option>
                        </select>
                    </div>
                    <div>
                        <button type="button" class="d-button">Upload</button>
                        <button type="button" class="d-button">Refresh</button>
                    </div>
                </div>

                <div id="d-schedule-views">
                    <div class="d-yearly-view">
                        <div class="c-schedule-container"></div>
                    </div>

                    <div class="d-monthly-view">
                        <div class="c-schedule-container"></div>
                    </div>

                    <div class="d-weekly-view">
                        <div class="tab-group-weekly-schedule tabs"></div>
                        <div class="d-schedule-wrapper"></div>
                    </div>

                    <div class="d-daily-view">
                        <div class="d-schedule-wrapper">
                            <div>
                                <div>
                                    
                                </div>
                                <div class="d-schedule-rows-container"></div>
                                <div class="d-row d-justify-end d-margin-top-10">
                                    <button type="button" class="d-button d-add-schedule-point"
                                        onclick="createDailyScheduleRow(document.querySelector('.d-daily-view .d-schedule-rows-container'), 0, 0)">+</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-custom-view">
                    </div>
                </div>

                <!-- <button type="button" onclick="addScheduleRow()" class="schedule-button">Add Row</button>
                <button type="button" onclick="submitSchedule()" class="schedule-button">Submit</button>
                <button type="button" onclick="fetchSchedule()" class="schedule-button">Load Schedule</button> -->
            </form>
        </div>

        <div id="tab-settings" class="tab-group-main tab-content">
            <form id="settingsForm">
                <div class="d-settings-content">
                    <div class="d-settings-row">
                        <label for="wifi_ssid">Wi-Fi SSID:</label>
                        <input type="text" id="wifi_ssid" name="wifi_ssid" required>
                    </div>

                    <div class="d-settings-row">
                        <label for="wifi_password">Wi-Fi Password:</label>
                        <input type="text" id="wifi_password" name="wifi_password">
                    </div>

                    <div class="d-settings-row">
                        <label for="remote_wifi_ssid">Remote Wi-Fi SSID:</label>
                        <input type="text" id="remote_wifi_ssid" name="remote_wifi_ssid">
                    </div>

                    <div class="d-settings-row">
                        <label for="remote_wifi_password">Remote Wi-Fi Password:</label>
                        <input type="text" id="remote_wifi_password" name="remote_wifi_password">
                    </div>

                    <div class="d-settings-row">
                        <label for="timezone">Timezone format:</label>
                        <input type="text" id="timezone" name="timezone">
                    </div>

                    <div class="button-container">
                        <button class="d-button" type="button" onclick="submitSettings()">Save Settings</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- <div id="d-day-schedule-popup" class="d-popup-container d-hidden"> -->
    <div id="d-day-schedule-popup" class="d-popup-container d-hidden"
        onclick="if (event.target === event.currentTarget) closePopup()">
        <div class="d-schedule-wrapper">
            <div>
                <h3 id="popup-header" class="d-center-header">
                    Day editor
                </h3>
            </div>
            <div class="d-popup-main-content">
                <div class="d-schedule-rows-container"></div>
                <div class="d-row d-margin-top-10 d-justify-end">
                    <button class="d-button d-add-schedule-point"
                        onclick="createDailyScheduleRow(document.querySelector('#d-day-schedule-popup .d-schedule-rows-container'), 0, 0)">+</button>
                </div>
            </div>
            <div class="d-bottom-buttons">
                <button class="d-button" onclick="savePopupSchedule()">Save</button>
                <button class="d-button" onclick="closePopup(false)">Cancel</button>
            </div>
            <div class="d-button d-close-button" onclick="closePopup()">âœ•</div>
            <div>
                <input id="d-popup-monthIndex" type="hidden">
                <input id="d-popup-dayIndex" type="hidden">
            </div>
        </div>
    </div>

    <script src="calendar.js"></script>
    <script src="schedule.js"></script>
    <script src="connectors.js"></script>

    <script src="index.js"></script>
    <script>
        createMonthCalendar("d-monthly-view .c-schedule-container", -1, onMonthlyDayClick)
        createYearCalendar("d-yearly-view .c-schedule-container", onYearlyDayClick);
        generateWeeklyView();

        loadSchedule();
    </script>
</body>

</html>